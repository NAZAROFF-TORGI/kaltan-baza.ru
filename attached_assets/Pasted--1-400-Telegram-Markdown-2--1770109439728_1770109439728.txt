–ü—Ä–∏–≤–µ—Ç! –£ –Ω–∞—Å –¥–≤–µ –∑–∞–¥–∞—á–∏:
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É 400 –≤ Telegram (—É–±—Ä–∞—Ç—å Markdown).
2. –î–æ–±–∞–≤–∏—Ç—å –º–∞—Å–∫—É –≤–≤–æ–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é (–∑–∞—â–∏—Ç—É –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).

–ó–ê–î–ê–ß–ê:
–û–±–Ω–æ–≤–∏ —Ñ–∞–π–ª `DownloadModal.tsx` (–∏–ª–∏ —Ç–æ—Ç, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ñ–æ—Ä–º–∞).

–®–ê–ì 1: –î–æ–±–∞–≤—å —Ñ—É–Ω–∫—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–ú–∞—Å–∫–∞):
–í—Å—Ç–∞–≤—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ:
const formatPhoneNumber = (value: string) => {
  const digits = value.replace(/\D/g, '');
  if (!digits) return '';
  // –§–æ—Ä–º–∞—Ç +7 (XXX) XXX-XX-XX
  if (digits.length < 2) return `+7 (${digits.slice(1)}`; 
  if (digits.length < 5) return `+7 (${digits.slice(1)}`;
  if (digits.length < 8) return `+7 (${digits.slice(1, 4)}) ${digits.slice(4)}`;
  if (digits.length < 10) return `+7 (${digits.slice(1, 4)}) ${digits.slice(4, 7)}-${digits.slice(7)}`;
  return `+7 (${digits.slice(1, 4)}) ${digits.slice(4, 7)}-${digits.slice(7, 9)}-${digits.slice(9, 11)}`;
};

–®–ê–ì 2: –û–±–Ω–æ–≤–∏ –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (input):
–î–æ–±–∞–≤—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ onChange:
<input
  type="tel"
  placeholder="+7 (999) 000-00-00"
  value={phone}
  onChange={(e) => {
    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç–∏—Ä–∞–µ—Ç, –¥–∞–µ–º —Å—Ç–∏—Ä–∞—Ç—å, –∏–Ω–∞—á–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º
    const val = e.target.value;
    setPhone(val.length < phone.length ? val : formatPhoneNumber(val));
  }}
  maxLength={18}
  required
  className="..." 
/>

–®–ê–ì 3: –û–±–Ω–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ (onSubmit) - –§–ò–ù–ê–õ–¨–ù–´–ô –§–ò–ö–°:
–ó–∞–º–µ–Ω–∏ –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ onSubmit –Ω–∞ —ç—Ç–æ—Ç –∫–æ–¥:

// --- VALIDATION & SEND START ---
e.preventDefault();

// 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–º–∏–Ω–∏–º—É–º 11 —Ü–∏—Ñ—Ä)
const digits = phone.replace(/\D/g, '');
if (digits.length < 11) {
  alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–≤—Å–µ 11 —Ü–∏—Ñ—Ä).');
  return;
}

// 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Email (–ø—Ä–æ—Å—Ç–æ–π regex)
const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
if (!emailRegex.test(data.email)) {
  alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π Email.');
  return;
}

// 3. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram (–ë–µ–∑ Markdown, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏ 400)
const cleanPhone = phone.replace(/[^\d+]/g, '');
const nameSafe = encodeURIComponent(data.name);
const phoneSafe = encodeURIComponent(phone);
const emailSafe = encodeURIComponent(data.email);
const docSafe = encodeURIComponent(selectedDocument);

// –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç –±–µ–∑ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ *
const msgText = `üî• –ù–û–í–´–ô –õ–ò–î!%0A%0Aüë§ –ò–º—è: ${nameSafe}%0Aüìû –¢–µ–ª: ${phoneSafe}%0Aüìß Email: ${emailSafe}%0AüìÑ –°–∫–∞—á–∞–ª: ${docSafe}`;

// –ö–Ω–æ–ø–∫–∏
const keyboard = {
  inline_keyboard: [
    [
      { text: "üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å", url: `tel:${cleanPhone}` },
      { text: "‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å", url: `mailto:${data.email}` }
    ]
  ]
};
const keyboardSafe = encodeURIComponent(JSON.stringify(keyboard));

const token = '8405875788:AAFIj7AOwb9H-xUr-a90vVd500nHgKh9SaI';
const chatId = '362845594';

// Image Beacon –º–µ—Ç–æ–¥ (–æ–±—Ö–æ–¥ CORS –∏ –æ—à–∏–±–æ–∫)
const url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chatId}&text=${msgText}&reply_markup=${keyboardSafe}`;
const img = new Image();
img.src = url;

// –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ (—ç–º—É–ª—è—Ü–∏—è)
const link = document.createElement('a');
const fileUrl = getFileInfo(selectedDocument).url; // –ò—Å–ø–æ–ª—å–∑—É–π —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–ª—É—á–µ–Ω–∏—è URL
link.href = fileUrl;
link.download = fileUrl.split('/').pop() || 'document.pdf';
document.body.appendChild(link);
link.click();
document.body.removeChild(link);

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ –∏ —Å–±—Ä–æ—Å
alert('–°–ø–∞—Å–∏–±–æ! –î–æ–∫—É–º–µ–Ω—Ç—ã —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è.');
setIsOpen(false);
// --- VALIDATION & SEND END ---

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: git add, git commit -m "Feat: phone mask, validation and telegram fix" –∏ git push.